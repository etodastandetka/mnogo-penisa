# –û—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ O!Dengi API

## üéØ –¶–µ–ª—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π O!Dengi –¥–ª—è QR-–æ–ø–ª–∞—Ç—ã –≤ –ø—Ä–æ–µ–∫—Ç–µ.

## üìã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **SID (ID —Ç–æ—Ä–≥–æ–≤—Ü–∞)**: `2310370542`
- **–ü–∞—Ä–æ–ª—å**: `#S5@8E#G3B(1J4W`
- **–°–µ—Ä–≤–µ—Ä**: `https://mw-api-test.dengi.kg/api/json/json.php`
- **–í–µ—Ä—Å–∏—è API**: `1005`
- **–Ø–∑—ã–∫**: `ru`

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. getOTP (–ü–æ–ª—É—á–µ–Ω–∏–µ OTP)
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –£—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–∞–µ–º OTP –∫–æ–¥
- **–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞**:
  ```json
  {
    "otp": "740824",
    "otpview": "740-824",
    "qr": "https://test4-mwallet.dengi.kg/qr.php?wl=nur&type=otp&data=740824",
    "link_app": "news://otp-740824"
  }
  ```

### 2. createInvoice (–°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–≤–æ–π—Å–∞)
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
- **–£—Å–ª–æ–≤–∏–µ**: –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**:
  - `order_id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∑–∞–∫–∞–∑–∞
  - `desc` - –æ–ø–∏—Å–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
  - `amount` - —Å—É–º–º–∞ –≤ –∫–æ–ø–µ–π–∫–∞—Ö
  - `currency` - –≤–∞–ª—é—Ç–∞ (KGS)
  - `test` - —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º (1)
- **–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞**:
  ```json
  {
    "invoice_id": "649313216038",
    "qr": "https://test4-mwallet.dengi.kg/qr.php?wl=&type=emvQr&data=...",
    "qr_url": "https://test4-mwallet.dengi.kg/#00020101021232490011qr.dengi.kg...",
    "link_app": "https://o.kg/l/a?t=wl_unpbill&id=649313216038"
  }
  ```

### 3. statusPayment (–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞)
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–æ–ª—É—á–∞–µ–º —Å—Ç–∞—Ç—É—Å "processing"
- **–í–æ–∑–º–æ–∂–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã**:
  - `1` - –í –æ–∂–∏–¥–∞–Ω–∏–∏ –æ–ø–ª–∞—Ç—ã
  - `2` - –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–º–µ–Ω–µ–Ω–∞
  - `3` - –ü–ª–∞—Ç–µ–∂ –æ–ø–ª–∞—á–µ–Ω

### 4. invoiceCancel (–û—Ç–º–µ–Ω–∞ –∏–Ω–≤–æ–π—Å–∞)
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –£—Å–ø–µ—à–Ω–æ –æ—Ç–º–µ–Ω—è–µ–º –∏–Ω–≤–æ–π—Å
- **–û—Ç–≤–µ—Ç**: `{"success": true}`

## ‚ùå –ü—Ä–æ–±–ª–µ–º—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### 1. createInvoice —Å OTP
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `otp`
- **–û—à–∏–±–∫–∞**: "–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –ø—Ä–æ—à–ª–æ –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö"
- **–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ–∑ OTP

### 2. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—ã–∑—ã–≤–∞—é—Ç –æ—à–∏–±–∫—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- **–†–∞–±–æ—Ç–∞—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**: `order_id`, `desc`, `amount`, `currency`, `test`
- **–ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**: `otp`, `long_term`, `result_url` (–≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö)

## üîß –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### Backend
1. **odengi-service.js** - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API
2. **routes/odengi.js** - API —Ä–æ—É—Ç—ã –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
3. **create-odengi-tables.js** - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –ë–î
4. **test-odengi-api.js** - —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

### Frontend
1. **ODengiPayment.tsx** - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è QR-–æ–ø–ª–∞—Ç—ã
2. **PaymentMethodSelector.tsx** - –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ O!Dengi

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **odengi_invoices** - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω–≤–æ–π—Å–æ–≤
- **odengi_callbacks** - –ª–æ–≥–∏ callback'–æ–≤

## üöÄ –ì–æ—Ç–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### –°–æ–∑–¥–∞–Ω–∏–µ QR-–∫–æ–¥–∞
```javascript
POST /api/odengi/create-qr
{
  "orderId": "12345",
  "amount": 1000,
  "description": "–ó–∞–∫–∞–∑ #12345",
  "customerPhone": "+996555123456"
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```javascript
GET /api/odengi/status/{orderId}
```

### Callback –æ–±—Ä–∞–±–æ—Ç–∫–∞
```javascript
POST /api/odengi/callback
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è O!Dengi
```

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- **–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤**: 4
- **–£—Å–ø–µ—à–Ω—ã—Ö**: 4
- **–ù–µ—É–¥–∞—á–Ω—ã—Ö**: 0
- **–ß–∞—Å—Ç–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö**: 1 (createInvoice —Å OTP)

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**O!Dengi API —É—Å–ø–µ—à–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ QR-–∫–æ–¥–æ–≤ –¥–ª—è –æ–ø–ª–∞—Ç—ã
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–µ–π
- ‚úÖ –û—Ç–º–µ–Ω–∞ –Ω–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö –∏–Ω–≤–æ–π—Å–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ callback'–æ–≤

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω** - –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–¥–∞–∫—à–Ω SID –∏ –ø–∞—Ä–æ–ª—å
2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ callback URL** - —É–∫–∞–∑–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π URL –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–ª–∞—Ç–µ–∂–µ–π
4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

---
*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: 17.09.2025*
*–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫: AI Assistant*
