# Простая настройка HTTPS для Mnogo Rolly

## Проблема
Netlify работает по HTTPS, а ваш сервер по HTTP. Браузер блокирует смешанный контент.

## Решение: HTTPS прямо в Node.js

### 1. На сервере (45.144.221.227)

#### Подключитесь к серверу:
```bash
ssh root@45.144.221.227
```

#### Установите OpenSSL (если не установлен):
```bash
sudo apt update
sudo apt install openssl
```

#### Перейдите в папку проекта:
```bash
cd /path/to/your/project/backend
```

#### Запустите сервер:
```bash
npm run server
```

Скрипт автоматически:
- ✅ Сгенерирует SSL сертификаты
- ✅ Запустит HTTPS сервер на порту 3443
- ✅ Запустит HTTP сервер на порту 3001

### 2. Откройте порты в файрволе

```bash
sudo ufw allow 3443
sudo ufw allow 3001
sudo ufw reload
```

### 3. Проверьте работу

#### HTTPS (основной):
```bash
curl -k https://45.144.221.227:3443/api/health
```

#### HTTP (резервный):
```bash
curl http://45.144.221.227:3001/api/health
```

### 4. Фронтенд уже обновлен

Фронтенд автоматически будет использовать:
- `https://45.144.221.227:3443/api`

### 5. Если нужно обновить сертификаты

```bash
cd backend
node generate-cert.js
```

## Преимущества этого решения:

✅ **Простота** - не нужен Nginx  
✅ **Автоматизация** - сертификаты генерируются автоматически  
✅ **Совместимость** - работает и HTTP, и HTTPS  
✅ **Безопасность** - HTTPS для продакшена  

## Проверка работы:

1. Запустите сервер: `npm run server`
2. Откройте: `https://45.144.221.227:3443/api/health`
3. Должно показать: `{"status":"OK","message":"Mnogo Rolly API работает"}`

## Примечание:

Самоподписанный сертификат может вызывать предупреждение в браузере. Это нормально для разработки. Для продакшена рекомендуется использовать Let's Encrypt.
